**Данный проект создан с опорой на начальный проект – DatabaseTests**

**Миграции.**

Необходимо реализовать изменение схемы базы данных посредством миграций с помощью системы миграции Flyway. Необходимо создать два скрипта миграции:

- Первым будет являться скрипт из проекта databaseTests  
- Вторым изменения, указанные в пункте базы данных

Миграции должны отрабатывать, как на базе данных, в которой нет нужных вам таблиц и прочих объектов БД, так и на базе данных, в которых уже все данные есть.

**Spring Data**

**1.** Подключить к проекту Spring Data.

**2.** Создать для уже существующих сущностей, (используемых для Hibernate), репозитории

**3.** Необходимо реализовать метод, который возвращает все дочерние сущности по идентификатору родительской:

public List<T> getAllByVId(id); // Здесь T – это дочерняя сущность, V – родительская.

**4)** Необходимо реализовать метод, который возвращает родительские сущности по определенному значению:

public List<T> getAllByName(name); // Здесь T – это тип сущности.

**Spring MVC**

**1.** Подключить к проекту Spring MVC.

**2.** Реализовать CRUD для каждой сущности, к которому можно обратиться через HTTP. (Чтобы было проще и понятнее, почитайте про @Controller и @RestController – это аннотации Spring, позволяющие создавать объекты прослушивающие HTTP – запросы).

**3.** Для всех созданных классов – контроллеров сделать интерфейс - Swagger.

**Spring Security**

Добавляется роль администратора. Он имеет доступ ко всем методам и может создавать новых пользователей. Пользователь связан с владельцем в соотношении 1:1.

Методы по получению информации и котиках и владельцах должны быть защищены. Доступ к соотвутсвующим endpoint’ам имеют только владельцы квартир и администраторы. Доступ к методам для фильтрации имеют все авторизованные пользователи, но на выходе получают только данные о своих квартирах.

**Дополненная база данных**
### Улица

|**Название поля**|**Тип данных поля**|
| :-: | :-: |
|Идентификатор|Long|
|Название|Varchar|
|Почтовый индекс|Int|
### Дом

|**Название поля**|**Тип данных поля**|
| :-: | :-: |
|Идентификатор|Long|
|Название|Varchar|
|Дата постройки|Date|
|Количество этажей|Int|
|Тип здания|Varchar|
|МатериалМатериал|Varchar|
|Улица|Long|
### Квартира

|**Название поля**|**Тип данных поля**|
| :-: | :-: |
|Идентификатор|Long|
|Номер|Int|
|Площадь|Int|
|Количество комнат|Int|
|Дом|Long|

- В таблице «Дом» атрибут «Улица» является вторичным ключом для атрибута «Идентификатор» из таблицы «Улица»;
- Атрибуты «Идентификатор» в обеих таблицах должны быть первичными ключами;
- Атрибут «Тип здания» таблицы «Дом» должен представлять из себя ограниченное количество значений: жилой помещение, коммерческое помещение, гараж, подсобное помещение.


